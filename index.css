:root{
  --bg:#f7f8fb;
  --panel:#ffffff;
  --accent:#0077cc;
  --muted:#6b7280;
  --shadow:0 6px 18px rgba(16,24,40,0.08);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); color:#111}

.site-header{background:linear-gradient(90deg,#fff, #fbfdff);border-bottom:1px solid #e6eef9}
.site-header .container{max-width:1100px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;gap:12px}
.site-header h1{font-size:18px;margin:0}
.site-header .tagline{margin:0;color:var(--muted);font-size:13px}

.app{display:grid;grid-template-columns:1fr 360px;gap:18px;max-width:1100px;margin:18px auto;padding:6px}
#map{height:74vh;border-radius:8px;box-shadow:var(--shadow);overflow:hidden}
.panel{background:var(--panel);padding:14px;border-radius:8px;box-shadow:var(--shadow);min-height:74vh;display:flex;flex-direction:column;gap:12px}

.weather-card{padding:12px;border-radius:6px;background:linear-gradient(180deg,#ffffff,#fbfcff);border:1px solid #eef3fb}
.weather-card h2{margin:0 0 6px 0;font-size:20px}
.weather-card .temp{font-size:28px;margin:0;color:var(--accent)}
.weather-card .desc{margin:4px 0;color:var(--muted)}

.row{display:flex;gap:8px;margin-top:8px}
input[type=text], input[type=search], #search{width:100%;padding:8px 10px;border-radius:6px;border:1px solid #e6eef9}
button{background:var(--accent);color:#fff;border:0;padding:8px 10px;border-radius:6px;cursor:pointer}
button[disabled]{opacity:0.6;cursor:not-allowed}
.note{font-size:12px;color:var(--muted)}

.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

/* small screens */
@media (max-width:900px){
  .app{grid-template-columns:1fr;}
  #map{height:60vh}
  .panel{min-height:auto}
}

/* Activities section */
.activities-card{padding:12px;border-radius:6px;background:linear-gradient(180deg,#ffffff,#fbfcff);border:1px solid #eef3fb;margin-top:12px}
.activities-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.activities-header h2{margin:0;font-size:18px;color:#111}
.distance-meter{display:flex;align-items:center;gap:6px;background:#e6f2ff;padding:6px 12px;border-radius:6px;font-size:13px}
.distance-label{color:var(--muted);font-weight:500}
#distance-display{color:var(--accent);font-weight:bold;font-size:14px}
.activity-btn{width:100%;margin-bottom:12px;background:linear-gradient(135deg,#0077cc,#005fa3);font-weight:500;transition:transform 0.2s}
.activity-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,119,204,0.3)}
.activity-btn:disabled{opacity:0.6;cursor:not-allowed;transform:none}
.activities-list{display:flex;flex-direction:column;gap:10px;max-height:400px;overflow-y:auto}
.activity-item{padding:12px;background:#fff;border-radius:6px;border:1px solid #e6eef9;cursor:pointer;transition:all 0.2s}
.activity-item:hover{background:#f7f9fc;border-color:var(--accent);transform:translateX(2px);box-shadow:0 2px 8px rgba(0,119,204,0.1)}
.activity-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:6px}
.activity-header h3{margin:0;font-size:15px;font-weight:600;color:#111;flex:1}
.activity-distance{color:var(--accent);font-weight:bold;font-size:13px;white-space:nowrap;margin-left:8px}
.activity-type{color:var(--muted);font-size:12px;margin:4px 0;text-transform:capitalize}
.activity-rating{color:#f59e0b;font-size:12px;margin:4px 0}
.activity-suggestion{color:#4b5563;font-size:12px;margin:6px 0 0 0;font-style:italic;line-height:1.4}
.loading{text-align:center;color:var(--muted);padding:12px;font-size:13px}
.error{color:#dc2626;padding:12px;text-align:center;font-size:13px}
.activity-marker{z-index:1000}

/* Map popup styling */
.leaflet-popup-content-wrapper{background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.15);padding:0}
.leaflet-popup-content{margin:0;padding:0;min-width:250px}
.leaflet-popup-tip{background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.map-popup-content{padding:14px;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif}
.popup-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #e6eef9}
.popup-title{margin:0;font-size:16px;font-weight:600;color:#111;flex:1;line-height:1.3}
.popup-distance{color:var(--accent);font-weight:bold;font-size:13px;white-space:nowrap;margin-left:8px;background:#e6f2ff;padding:4px 8px;border-radius:4px}
.popup-body{display:flex;flex-direction:column;gap:8px}
.popup-info{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.popup-type{color:var(--muted);font-size:12px;font-weight:500}
.popup-rating{color:#f59e0b;font-size:12px;font-weight:500}
.popup-address{color:var(--muted);font-size:12px;margin:0;line-height:1.4}
.popup-suggestion{color:#4b5563;font-size:12px;margin:0;line-height:1.5;padding:8px;background:#f7f9fc;border-radius:6px;border-left:3px solid var(--accent)}
.popup-category{display:inline-block;background:var(--accent);color:#fff;font-size:10px;padding:4px 8px;border-radius:4px;font-weight:500;margin-top:4px}

/* Reviews styling in popups */
.popup-reviews{margin-top:12px;padding-top:12px;border-top:1px solid #e6eef9}
.reviews-title{display:block;font-size:13px;font-weight:600;color:#111;margin-bottom:8px}
.review-item{background:#f7f9fc;padding:10px;border-radius:6px;margin-bottom:8px;border-left:3px solid var(--accent)}
.review-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.review-author{font-size:12px;font-weight:600;color:#111}
.review-rating{font-size:12px;color:#f59e0b;font-weight:500}
.review-text{font-size:12px;color:#4b5563;line-height:1.5;margin:6px 0;font-style:italic}
.review-time{font-size:11px;color:var(--muted);display:block;margin-top:4px}

/* Search radius indicator */
.search-radius-info{margin-bottom:8px;text-align:center}
.radius-badge{display:inline-block;background:#e6f2ff;color:var(--accent);font-size:11px;padding:6px 12px;border-radius:6px;font-weight:500}

/* Reviews in activity list items */
.activity-review{margin-top:8px;padding:8px;background:#f7f9fc;border-radius:6px;border-left:2px solid var(--accent)}
.review-header-small{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}
.review-author-small{font-size:11px;font-weight:600;color:#111}
.review-rating-small{font-size:11px;color:#f59e0b;font-weight:500}
.review-text-small{font-size:11px;color:#4b5563;line-height:1.4;margin:0;font-style:italic}

/* Activity summary notification popup */
.activity-summary-popup{position:fixed;top:20px;right:20px;z-index:10000;background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.2);padding:0;min-width:300px;max-width:400px;animation:slideInRight 0.3s ease-out}
@keyframes slideInRight{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
.summary-content{display:flex;align-items:center;gap:12px;padding:16px}
.summary-icon{font-size:32px;line-height:1}
.summary-text{flex:1}
.summary-text strong{display:block;color:#111;font-size:15px;margin-bottom:4px}
.summary-text p{margin:0;color:var(--muted);font-size:12px}
.summary-close{background:none;border:none;font-size:24px;color:var(--muted);cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all 0.2s}
.summary-close:hover{background:#f3f4f6;color:#111}

/* Custom scrollbar */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:#f1f1f1}
::-webkit-scrollbar-thumb{background:#c7c7c7;border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:#9b9b9b}

/* Chatbot styles */
#gemini-chatbot{position:fixed;left:20px;top:50%;transform:translateY(-50%);z-index:10050;font-family:inherit;display:flex;flex-direction:column;align-items:flex-start;gap:10px}
#gemini-chatbot .chatbot-toggle{background:var(--accent);color:#fff;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 20px rgba(2,6,23,0.25);cursor:pointer;transition:transform 200ms ease}
#gemini-chatbot .chatbot-toggle:hover{transform:scale(1.05)}

/* Hidden collapsed state: window is small and circular to match the toggle */
#gemini-chatbot .chatbot-window{width:0;max-width:0;height:0;max-height:0;border-radius:50%;box-shadow:0 12px 36px rgba(2,6,23,0.3);background:var(--panel);display:flex;flex-direction:column;overflow:hidden;opacity:0;transform-origin:left center;transition:all 300ms cubic-bezier(.2,.9,.2,1)}

/* Opened state: expands to a full chat panel */
#gemini-chatbot.open .chatbot-window{width:320px;max-width:90vw;height:420px;max-height:80vh;border-radius:12px;padding:0;opacity:1}

.chatbot-header{padding:10px 12px;border-bottom:1px solid #eef3fb;display:flex;align-items:center;justify-content:space-between}
.chatbot-header-content{display:flex;align-items:center;gap:10px}
.chatbot-header h3{margin:0;font-size:15px}
.chatbot-subtitle{margin:0;font-size:12px;color:var(--muted)}
.chatbot-messages{flex:1;overflow-y:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
.chatbot-message{display:flex}
.chatbot-user{justify-content:flex-end}
.chatbot-assistant{justify-content:flex-start}
.message-content{background:#f7f9fc;padding:10px;border-radius:8px;max-width:84%;line-height:1.3}
.chatbot-user .message-content{background:var(--accent);color:#fff}
.chatbot-input-container{display:flex;border-top:1px solid #eef3fb;padding:8px}
.chatbot-input{flex:1;padding:8px;border-radius:8px;border:1px solid #e6eef9}
.chatbot-send{background:var(--accent);color:#fff;border:0;padding:8px;border-radius:8px;margin-left:8px;cursor:pointer}
.typing-indicator span{display:inline-block;width:6px;height:6px;margin-right:4px;background:#cfd8dc;border-radius:50%;opacity:0.6;animation:blink 1s infinite}
.typing-indicator span:nth-child(2){animation-delay:0.2s}
.typing-indicator span:nth-child(3){animation-delay:0.4s}
@keyframes blink{0%{opacity:0.2}50%{opacity:1}100%{opacity:0.2}}

/* Mobile: keep toggle accessible near bottom-right and full width chat */
@media (max-width:480px){
  #gemini-chatbot{right:12px;top:auto;bottom:20px;transform:none}
  #gemini-chatbot .chatbot-window{right:12px;bottom:80px;width:92vw;height:60vh}
  #gemini-chatbot.open .chatbot-window{width:92vw;height:60vh}
}

